<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>09_构造函数</title>
<script>
  function createPerson(name, age) {
    return {
      name: name,
      age: age,
      sayName: function () {
        console.log(this.name)
      }
    }
  }

  var person = createPerson('jack', 18)
  console.log(person)
  console.log(typeof person)
  console.log('----------------------------------------------------------------------------------------------------')

  /*
    工厂方法, 创建狗的对象
      使用工厂方法创建的对象, 使用的构造函数都是Object
      所有创建的对象都是Object这个类型, 就导致无法区分出多种不同类型的对象
   */
  function createDog(name, age) {
    return {
      name: name,
      age: age,
      sayHello: function () {
        console.log('旺旺')
      }
    }
  }

  var dog = createDog('旺财', 3)
  dog.sayHello()
  console.log(dog)
  console.log(typeof dog)
  console.log('----------------------------------------------------------------------------------------------------')

  /*
    创建一个构造函数, 专门用来创建Person对象
      构造函数就是一个普通的函数, 创建方式和普通函数没有区别
      不同的是构造函数习惯上首字母大写

    构造函数和普通函数的区别就是调用方式的不同
      普通函数是直接调用, 而构造函数需要使用new关键字来调用

    构造函数的执行流程:
      1. 立刻创建一个新的对象
      2. 将新建的对象设置为函数中的this, 在构造函数中可以使用this来引用新建的对象
      3. 逐行执行函数中的代码
      4. 将新建的对象作为返回值返回

    使用同一个构造函数创建的对象, 我们称为一类对象, 也将一个构造函数称为一个类
      我们将通过一个构造函数创建的对象, 称为是该类的实例

    this的情况：
      1. 当以函数的形式调用时, this就是window
      2. 当以方法的形式调用时, 谁调用方法this就是谁
      3. 当以构造函数的形式调用时, this就是新创建的那个对象
   */
  function Person(name, age) {
    this.name = name
    this.age = age
  }

  var per = new Person('Rose', 12)
  console.log(per)
  console.log(typeof per)
  // 使用 instanceof 可以检查一个对象是否是一个类的实例
  console.log(per instanceof Person) // true
</script>
</head>
<body>

</body>
</html>